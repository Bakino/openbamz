<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>

    <link rel="stylesheet" href="//unpkg.com/grapesjs/dist/css/grapes.min.css">
    <script src="//unpkg.com/grapesjs"></script>
</head>
<body>
    <div id="gjs">
        <h1>test</h1>
    </div>

    <script>
        const config = {
            container: '#gjs',
            
            height: '100%',
            allowScripts: 1,
            canvas: {
                styles: [
                ]
            },
            pageManager: {
                pages: [
                    {
                        id: 'my-first-page',
                        styles: '.my-page1-el { color: red }',
                        component: '<div class="my-page1-el">Page 1</div>',
                    },
                    {
                        id: 'my-second-page',
                        styles: '.my-page2-el { color: blue }',
                        component: '<div class="my-page2-el">Page 2</div>',
                    },
                ]
            }
            //components: componentContent,
            // storageManager: { type: 'report-editor-storage', autosave: false },
        };

        const editor = grapesjs.init(config);


        const pm = editor.Pages;

        const app = new Vue({
            el: '.pages-wrp',
            data: { pages: [] },
            mounted() {
                this.setPages(pm.getAll());
                editor.on('page', () => {
                    this.pages = [...pm.getAll()];
                });
            },
            methods: {
                setPages(pages) {
                 this.pages = [...pages];
                },
                isSelected(page) {
                 return pm.getSelected().id == page.id;
                },
                selectPage(pageId) {
                 return pm.select(pageId);
                },
                removePage(pageId) {
                  return pm.remove(pageId);
                },
                addPage() {
                    const len = pm.getAll().length;
                    pm.add({
                        name: `Page ${len + 1}`,
                        component: '<div>New page</div>',
                    });
                },
            }
        });
    </script>
</body>
</html>